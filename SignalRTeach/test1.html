<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>SignalR客户端连接</title>
	<meta charset="utf-8" />
    <script src="Scripts/jquery-1.6.4.js"></script>
    <script src="Scripts/json2.js"></script>
    <script src="Scripts/jquery.signalR-2.2.1.js"></script>
</head>
<body>
    <script type="text/javascript">
     
        var connection = $.connection("/realtime/echo");

        $(function () {
        
            connection.start()
                .done(function () {
                alert("a user is connected!")
                })
                .fail(function () {
                    alert("connect is error!");
                });

            connection.received(function (msg) {
                alert(msg);
            });
           
        });

        function sendToMessage() { 
            var message = $("#txtMessage").val(); 
            connection.send(message);
        }
    </script>

    <textarea id="txtMessage" rows="10"></textarea>
    <input type="button" id="btnSend" value="发送" onclick="sendToMessage()"/>
</body>
</html>
